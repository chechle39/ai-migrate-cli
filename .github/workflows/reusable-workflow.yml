name: AI Migrate cli

on:
  workflow_dispatch:
    inputs:
      AWSAccount:
        type: choice
        description: Which VERSION?
        options:
          - tuanlt6
          - tuanlt6

jobs:
  ai-cli:
    if: ${{ github.event.inputs.AWSAccount == 'tuanlt6' }}
    runs-on: ubuntu-latest
    env:
      ENV_FILE_PATH: ./.github/variables/stack_vars.env
      PROJECT_APPKEY: dynamodb
      VERSION:  1.0.1
      NODE_AUTH_TOKEN: ${{ secrets.NPM_TOKEN }}

    steps:
      - name: Checkout Project Source Code üõí
        uses: actions/checkout@v4


      - name: üõ†Ô∏è Create .npmrc File
        run: |
          chmod 775 -R ./scripts && ./scripts/create-npmrc-file.sh
        ##########################################
      - name: Setup Node.js
      ##########################################
        uses: actions/setup-node@v3
        with:
          node-version: '20'


      - name: Create Environment
        uses: ./.github/actions/set-env-vars
        with:
          varFilePath: ${{ env.ENV_FILE_PATH }}


      - name: ‚úÖ build
        run: |
          chmod 775 -R ./scripts/
          ./scripts/project-script.sh